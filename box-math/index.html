<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle Box - Game Matematika Ceria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Palet Warna Ceria
                        'mat-primary': '#66BB6A', // Hijau Cerah
                        'mat-secondary': '#FFEB3B', // Kuning Ceria
                        'mat-accent': '#FF9800', // Oranye Hangat
                        'mat-bg': '#FFFDE7', // Krem Muda
                        'mat-danger': '#E57373', // Merah Muda
                        'mat-info': '#4FC3F7', // Biru Muda
                        'mat-dark': '#3E2723' // Coklat Tua
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bungee+Spice&family=Fredoka:wght@400;600;700&display=swap');
        
        body {
            /* Menggunakan Fredoka, Font anak-anak yang ramah */
            font-family: 'Fredoka', cursive;
            background: linear-gradient(135deg, #FFFDE7 0%, #FFE0B2 100%); /* Latar belakang hangat */
        }
        
        /* Animasi Header */
        @keyframes bounce-in {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .bouncing-header {
            animation: bounce-in 2s ease-out infinite;
        }

        /* Styling Sel Puzzle */
        .puzzle-cell {
            width: 75px; 
            height: 75px;
            border: 4px solid #FFC107; /* Border kuning ceria */
            border-radius: 15px; /* Lebih membulat */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px; 
            font-weight: 700;
            color: #3E2723; /* Warna teks gelap */
            background-color: white;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 6px 0 0 #FF9800; /* Shadow untuk efek 3D */
            transform: translateY(-2px);
        }
        .puzzle-cell:active {
            box-shadow: 0 2px 0 0 #FF9800;
            transform: translateY(2px);
        }
        
        /* Input Field */
        .puzzle-input {
            text-align: center;
            padding: 0;
            margin: 0;
            border: none;
            width: 100%;
            height: 100%;
            font-size: 24px;
            font-weight: 700;
            outline: none;
            background-color: #E8F5E9; /* Warna hijau muda */
            border-radius: 10px;
        }
        
        /* Sel Angka Tetap */
        .fixed-cell {
            background-color: #FFECB3; /* Krem lembut */
            border-color: #FFB74D;
            box-shadow: 0 6px 0 0 #FFB74D; 
            color: #3E2723;
        }

        /* Tombol Pilihan */
        .option-btn-operation, .option-btn-time, .option-btn-level {
            transition: all 0.3s ease;
            box-shadow: 0 4px 0 0 rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        .option-btn-operation:hover, .option-btn-time:hover, .option-btn-level:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 0 rgba(0, 0, 0, 0.2);
        }
        .selected-btn {
            background-color: #FF5722 !important; /* Warna aksen yang menonjol */
            color: white !important;
            box-shadow: 0 2px 0 0 #D84315 !important;
            transform: translateY(2px);
        }
    </style>
</head>
<body class="bg-mat-bg min-h-screen flex flex-col items-center p-4">

    <header class="text-center mb-10">
        <h1 class="text-6xl text-mat-accent font-extrabold bouncing-header mb-2" style="font-family: 'Bungee Spice', cursive;">
            Math Puzzle Box! üéâ
        </h1>
        <p class="text-xl text-mat-dark">Ayo kita hitung!</p>
    </header>

    <div id="name-screen" class="bg-white p-8 rounded-3xl shadow-2xl max-w-lg w-full border-8 border-mat-info/50">
        <label for="student-name" class="block text-2xl font-semibold mb-4 text-mat-dark">Tuliskan Nama Anda:</label>
        <input type="text" id="student-name" placeholder="Nama Pahlawan Angka!" 
               class="w-full p-4 border-4 border-mat-primary rounded-xl focus:ring-4 focus:ring-mat-primary/50 text-xl mb-6 shadow-md">
        
        <h3 class="text-xl font-bold mb-3 text-mat-dark">1. Pilih Misi & Ukuran Arena:</h3>
        <div class="flex flex-wrap justify-center gap-3 mb-6">
            <button onclick="selectOption('operation', 'plus_2x2', 'btn-op-')" id="btn-op-plus_2x2" class="option-btn-operation w-[calc(50%-6px)] bg-mat-info text-white font-bold py-3 rounded-xl text-md">‚ûï / ‚ûñ (2x2) Pemanasan</button>
            <button onclick="selectOption('operation', 'plus_3x3', 'btn-op-')" id="btn-op-plus_3x3" class="option-btn-operation w-[calc(50%-6px)] bg-mat-info text-white font-bold py-3 rounded-xl text-md">‚ûï / ‚ûñ (3x3) Tantangan</button>
            <button onclick="selectOption('operation', 'times_2x2', 'btn-op-')" id="btn-op-times_2x2" class="option-btn-operation w-[calc(50%-6px)] bg-mat-primary text-white font-bold py-3 rounded-xl text-md">‚úñÔ∏è / ‚ûó (2x2) Pemanasan</button>
            <button onclick="selectOption('operation', 'times_3x3', 'btn-op-')" id="btn-op-times_3x3" class="option-btn-operation w-[calc(50%-6px)] bg-mat-primary text-white font-bold py-3 rounded-xl text-md">‚úñÔ∏è / ‚ûó (3x3) Tantangan</button>
        </div>

        <h3 class="text-xl font-bold mb-3 text-mat-dark">2. Pilih Kecepatan Misi:</h3>
        <div class="flex justify-between space-x-2 mb-6">
            <button onclick="selectOption('time', 90, 'btn-time-')" id="btn-time-90" class="option-btn-time flex-1 bg-mat-primary text-white font-bold py-3 rounded-xl text-md">Santai (90s)</button>
            <button onclick="selectOption('time', 60, 'btn-time-')" id="btn-time-60" class="option-btn-time flex-1 bg-mat-accent text-white font-bold py-3 rounded-xl text-md">Seru (60s)</button>
            <button onclick="selectOption('time', 30, 'btn-time-')" id="btn-time-30" class="option-btn-time flex-1 bg-mat-danger text-white font-bold py-3 rounded-xl text-md">Kilat! (30s)</button>
            <button onclick="selectOption('time', 'unlimited', 'btn-time-')" id="btn-time-unlimited" class="option-btn-time flex-1 bg-mat-info text-white font-bold py-3 rounded-xl text-md">Longgar üßò</button>
        </div>

        <h3 class="text-xl font-bold mb-3 text-mat-dark">3. Pilih Tingkat Kekuatan Angka:</h3>
        <div class="flex justify-between space-x-1 mb-8">
            <button onclick="selectOption('level', 'level1', 'btn-level-')" id="btn-level-level1" class="option-btn-level flex-1 bg-gray-400 text-white font-bold py-2 rounded-lg text-sm transition duration-200">Level 1</button>
            <button onclick="selectOption('level', 'level2', 'btn-level-')" id="btn-level-level2" class="option-btn-level flex-1 bg-gray-400 text-white font-bold py-2 rounded-lg text-sm transition duration-200">Level 2</button>
            <button onclick="selectOption('level', 'level3', 'btn-level-')" id="btn-level-level3" class="option-btn-level flex-1 bg-gray-400 text-white font-bold py-2 rounded-lg text-sm transition duration-200">Level 3</button>
            <button onclick="selectOption('level', 'level4', 'btn-level-')" id="btn-level-level4" class="option-btn-level flex-1 bg-gray-400 text-white font-bold py-2 rounded-lg text-sm transition duration-200">Level 4</button>
        </div>

        <button onclick="startGame()" id="start-btn" 
                class="w-full bg-mat-secondary hover:bg-yellow-400 text-mat-dark font-extrabold py-4 rounded-xl text-2xl 
                       transition duration-300 disabled:opacity-50 shadow-lg border-b-4 border-mat-accent hover:border-b-2 hover:translate-y-0.5" disabled>
            START PETUALANGAN! üöÄ
        </button>
    </div>

    <main id="game-screen" class="hidden w-full max-w-6xl">
        <div class="flex justify-between items-center w-full max-w-4xl mx-auto mb-6 p-4 rounded-xl shadow-lg bg-mat-info/20 border-2 border-mat-info">
            <div class="flex items-center gap-3">
                <span class="text-3xl">üßë‚Äçüéì</span>
                <p class="text-xl text-mat-dark">Pemain: <span id="display-name" class="font-bold text-mat-accent"></span></p>
            </div>
            <div class="bg-white px-6 py-3 rounded-xl shadow-md border-2 border-mat-secondary">
                <p class="text-2xl font-bold flex items-center gap-2 text-mat-dark" id="timer-display">
                    <span class="text-mat-secondary">‚è≥</span>
                    <span class="text-mat-danger">--</span>
                </p>
            </div>
        </div>
        
        <div class="bg-white p-8 rounded-3xl shadow-2xl border-8 border-mat-secondary transform transition-all duration-500">
            <h2 class="text-3xl font-extrabold mb-6 text-mat-primary text-center" id="puzzle-title"></h2>
            
            <div id="puzzle-grid-container" class="w-full">
                </div>
            
            <div class="mt-8 flex flex-col items-center">
                <button onclick="checkPuzzle(false)" id="check-btn" 
                        class="bg-mat-accent hover:bg-orange-500 text-white font-extrabold py-3 px-8 rounded-xl text-2xl 
                               transition duration-300 shadow-lg border-b-4 border-mat-dark/50 hover:border-b-2 hover:translate-y-0.5">
                    CEK JAWABAN! ‚úÖ
                </button>
                <button onclick="resetPuzzle()" id="retry-btn" 
                        class="hidden mt-4 bg-mat-danger hover:bg-red-500 text-white font-bold py-2 px-6 rounded-lg text-xl transition duration-300 shadow-md">
                    Coba Lagi üîÑ
                </button>
            </div>
            <p id="feedback" class="mt-6 text-xl font-semibold text-center p-4 rounded-xl transition-all duration-300"></p>
        </div>
    </main>

    <script src="script.js"></script> 

</body>
</html>